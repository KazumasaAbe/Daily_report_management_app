<% provide(:title, "日報提出") %>
<% provide(:class_text, "signup") %>
<h2>日報提出</h2>
<h2><%= l(@attendance.worked_on) %></h2>

<%= form_with(model: @user, url: attendances_reception_update_user_path(@user, data: @attendance), method: :patch ) do |f| %>
<%= f.fields_for :attendances, @attendance do |a| %>


<div class="row">
  <div class="col-md-10 col-md-offset-1">
    <div class="pull-right"><%= link_to "受付取得", receptions_path, class: "btn btn-info btn-sm" %></div>
    <div style="margin-bottom: 40px;"></div>

    <table class="table table-bordered table-condensed table-hover" id="table-users">
      <thead>
      <tbody>
        <tr>
          <th>受付No</th>

          <% if @receipts.present? %>
          <% @receipts.each do |receipt| %>
          <%= f.fields_for "daily_receipts[]", receipt do |r| %>
          <td><%= receipt.receipt_namuber %></td>
          <%= r.hidden_field :d_receipt_namuber, value: receipt.receipt_namuber %>
          <% end %>
          <% end %>
          <% else %>
          <td></td>
          <td></td>
          <td></td>
          <td></td>
          <td></td>
          <% end %>

        </tr>
        <tr>
          <th>業務名</th>

          <% if @receipts.present? %>
          <% @receipts.each do |receipt| %>
          <%= f.fields_for "daily_receipts[]", receipt do |r| %>
          <td><%= receipt.receipt_name %></td>
          <%= r.hidden_field :d_receipt_name, value: receipt.receipt_name %>
          <% end %>
          <% end %>
          <% else %>
          <td></td>
          <td></td>
          <td></td>
          <td></td>
          <td></td>
          <% end %>
        </tr>

        <tr>
          <th>業務種類</th>

          <% if @receipts.present? %>
          <% @receipts.each do |receipt| %>
          <%= f.fields_for "daily_receipts[]", receipt do |r| %>
          <td><%= receipt.receipt_specialty %></td>
          <%= r.hidden_field :d_receipt_specialty, value: receipt.receipt_specialty %>
          <% end %>
          <% end %>
          <% else %>
          <td></td>
          <td></td>
          <td></td>
          <td></td>
          <td></td>
          <% end %>
        <tr>

        <tr>
          <th>業務時間</th>

          <% if @receipts.present? %>
          <%= f.hidden_field :'#', id: "count", value: @receipts.count %>
          <% @receipts.each_with_index do |receipt, i| %>
          <%= f.fields_for "receipts[]", receipt do |r| %>
          <td><%= r.number_field :receipt_time, id: "add10#{i}", class: "form-control", min: 0, placeholder: '分' %></td>
          <% end %>
          <% end %>
          <% else %>
          <td></td>
          <td></td>
          <td></td>
          <td></td>
          <td></td>
          <% end %>
        </tr>

        </thead>
      </tbody>
    </table>

    <div class="row">
      <div class="col-md-6">
        <h3>その他</h3>


        <table class="table table-bordered table-condensed table-hover" id="table-users">
          <thead>
          <tbody>
            <tr>
              <th>4S</th>
              <td><%= a.number_field :clean_time, id: "add2", class: "form-control", min: 0, placeholder: '分' %></td>
            </tr>

            <tr>
              <th>朝礼/昼礼</th>
              <td><%= a.number_field :meeting_time, id: "add3", class: "form-control", min: 0, placeholder: '分' %></td>
            </tr>

            <tr>
              <th>その他</th>
              <td><%= a.number_field :other_time, id: "add4", class: "form-control", min: 0, placeholder: '分'%></td>
            </tr>

            <tr>
              <th>残業時間</th>
              <td><%= a.select :over_time, ['','0','0.25', '0.5', '0.75', '1.0',
                                        '1.25', '1.5', '1.75', '2.0',
                                        '2.25', '2.5', '2.75', '3.0' ], {}, class: "form-control" %></td>
            </tr>

            <tr>
              <th>出勤区分</th>
              <td><%= a.select :classification, ['通常','有給', '午前休', '午後休'], {}, class: "form-control" %></td>
            </tr>

            <tr>
              <th>勤務時間</th>
              <td><%= a.text_field :working_time, id: "add5",readonly: true, class: "form-control" %></td>

            </tr>


            <tr>
              <th>勤務指定時間</th>
              <td><%= a.text_field :designation_time, id: "add10",readonly: true, class: "form-control" %></td>
            </tr>

          </tbody>
          </thead>


        </table>
      </div>
    </div>





    <%= f.submit "提出", class: "btn btn-primary btn-block" %>


  </div>
</div>
<% end %>

<% end %>